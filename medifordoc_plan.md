<!-- Filename: medifordoc_plan.md -->

# 메디포닥(medifordoc.com) 병원/의료기관 전용 구인구직 플랫폼 개발 기획서 (MVP/V1/V2)

| 항목 | 내용 |
|---|---|
| 문서명 | 메디포닥 병원/의료기관 전용 구인구직 플랫폼 개발 기획서 |
| 버전 | v0.1 |
| 작성일 | 2026-02-14 (KST) |
| 작성자(가칭) | 시니어 PM + 테크리드 (가칭) |
| 상태 | Draft |
| 범위 | MVP / V1 / V2 |

---

## 목차 (TOC)
1. [Assumptions](#assumptions)
2. [2.1 Executive Summary](#21-executive-summary)
3. [2.2 목표 / 비목표](#22-목표--비목표-goals--non-goals)
4. [2.3 사용자/이해관계자 정의](#23-사용자이해관계자-정의-personas)
5. [2.4 핵심 유저 플로우](#24-핵심-유저-플로우-user-journey)
6. [2.5 정보 구조(IA) & 화면/페이지 목록](#25-정보-구조ia--화면페이지-목록)
7. [2.6 기능 요구사항 (MVP / V1 / V2)](#26-기능-요구사항-mvp--v1--v2)
   - [A. 회원/인증](#a-회원인증)
   - [B. 공고(채용 포지션) 도메인](#b-공고채용-포지션-도메인)
   - [C. 탐색/검색/필터/정렬](#c-탐색검색필터정렬)
   - [D. 지원(Apply) & 지원자 관리(ATS-lite)](#d-지원apply--지원자-관리ats-lite)
   - [E. 이력서/프로필 & 인재정보](#e-이력서프로필--인재정보)
   - [F. 스카우트/포지션 제안(매칭)](#f-스카우트포지션-제안매칭)
   - [G. 스크랩/관심기업/최근 본 공고](#g-스크랩관심기업최근-본-공고)
   - [H. 알림/메시징](#h-알림메시징)
   - [I. 기업 인증/검증](#i-기업-인증검증)
   - [J. 유료화/광고/정산](#j-유료화광고정산)
   - [K. 고객센터/운영](#k-고객센터운영)
   - [L. 부가 기능 후보](#l-옵션-부가-기능-후보)
8. [2.7 권한/역할 매트릭스](#27-권한역할-매트릭스)
9. [2.8 데이터 모델 (DB 스키마 초안)](#28-데이터-모델-db-스키마-초안)
10. [2.9 API 명세(초안)](#29-api-명세초안)
11. [2.10 비기능 요구사항(NFR)](#210-비기능-요구사항nfr)
12. [2.11 분석/이벤트 트래킹 설계](#211-분석이벤트-트래킹-설계)
13. [2.12 마일스톤/일정/백로그](#212-마일스톤일정백로그)
14. [2.13 테스트 플랜](#213-테스트-플랜)
15. [2.14 오픈 이슈/결정 필요 사항](#214-오픈-이슈결정-필요-사항)
16. [Appendix: 용어집](#appendix-용어집)

---

## Assumptions

| 구분 | 가정/전제 |
|---|---|
| 일정 | MVP 8주(6~10주 범위 내), 스프린트 2주 x 4회 |
| 플랫폼 | Web(반응형) + Mobile Web 우선, 앱은 V2 이후 |
| 기술 스택(선호 반영) | FE: Next.js / BE: FastAPI / DB: PostgreSQL / Cache: Redis |
| 검색 | MVP: PostgreSQL Full-text + trigram(자동완성 옵션) / V1: OpenSearch(옵션) |
| 파일 저장소 | 사업자등록증/첨부파일: S3 호환 오브젝트 스토리지(예: AWS S3/NCP 등) + CDN |
| 알림 채널 | 이메일 필수, SMS/푸시 옵션(푸시는 V2 또는 PWA 기반) |
| 결제 | 국내 PG 연동 필요. 옵션: 토스페이먼츠 / PortOne(아임포트) / KG이니시스 등(최종 결정 필요) |
| 세금계산서 | 전자세금계산서 발행 프로세스는 “요건 정의 + 법무/회계 검토 필요”(외부 발행 대행 연동 가능성) |
| 법/규정 | 개인정보보호/고용정보/전자상거래/광고성 정보 전송 등 준수 필요, **법무 검토 필요** |
| 벤치마크 | 제공 URL들은 “업계 일반 패턴” 도출에만 사용(직접 크롤링/인용 없음) |

**수용 기준(AC)**  
- 위 Assumptions가 문서 내 일정/스코프/설계 전반에 일관되게 반영되어야 한다.  
- 법/규정 관련 문구는 단정하지 않고 “준수 필요/법무 검토 필요” 수준으로 표기되어야 한다.

---

## 2.1 Executive Summary

### 문제 정의
- 의료기관 채용은 직군/근무형태(교대/킵)/면허 등 구조화된 정보가 중요하나, 범용 채용 플랫폼은 의료 특화 필터/이력서 구조/검증/스팸 방지 요구를 충분히 만족시키기 어렵다.
- 병원은 공고 등록 이후 지원자 관리(연락, 파이프라인, 메모)가 필요하지만 과한 ATS는 도입 장벽이 높다.
- 구직자는 면허/경력 기반으로 빠른 매칭과 신뢰 가능한 공고(검수/인증)를 기대한다.

### 해결 방식
- **의료 직군 특화 공고/이력서 스키마** + **특화 검색/필터** 제공
- 병원 담당자용 **ATS-lite(지원자 파이프라인/메모/태그/상태관리)** 제공
- **기업 인증 + 공고 검수/신고/블라인드**로 스팸/불량 공고 방지
- 유료 상품(상단노출/부스팅/열람권/배너 등) 기반 수익화 + 결제/세금계산서/정산 프로세스 제공

### MVP 범위 요약
- 개인/기업 회원 가입/인증(기본)  
- 공고 등록/노출/탐색/지원(기본)  
- 지원 현황/지원자 관리(ATS-lite 핵심)  
- 이력서/프로필(면허/경력/희망조건)  
- 기업 인증, 신고/검수, 기본 운영자(Admin) 콘솔  
- 유료 상품: **공고 부스팅/상단노출 1~2종 + 인재 열람권(크레딧) 중 1종**(옵션 선택)

### 성공 지표(KPI) 제안 (5개 내외)
1. 신규 공고 등록 수(주간)  
2. 공고 조회 → 지원 전환율(Apply CVR)  
3. 기업 인증 승인율/반려율 및 평균 처리시간  
4. 유료 상품 결제 전환율(기업 가입 대비 결제 비율)  
5. 불량 공고/스팸 신고율 및 처리 SLA 준수율

**수용 기준(AC)**  
- MVP 범위가 “구직자/기업/운영자” 각각의 핵심 가치를 1개 이상 만족하도록 구성되어야 한다.  
- KPI는 이벤트 트래킹 설계(2.11)에서 측정 가능해야 한다(이벤트/속성 정의 포함).

---

## 2.2 목표 / 비목표 (Goals / Non-goals)

### Goals (MVP에서 반드시)
| 구분 | 목표 |
|---|---|
| 구직자 | 특화 필터로 공고 탐색 → 스크랩 → 이력서 기반 지원 → 지원 현황 확인 |
| 기업 | 기업 인증 → 공고 등록 → 지원자 파이프라인 관리 → 연락/면접 제안 기록 → 채용 처리 |
| 신뢰/운영 | 공고 검수/신고/블라인드, 계정 차단, 감사로그 |
| 수익화(최소) | 최소 1개 유료 상품 결제/영수증/내역 + 환불 정책(초안) |
| 데이터 | 이벤트 트래킹/퍼널로 성장 지표 측정 가능 |

### Non-goals (이번엔 안 하는 것: MVP 제외)
| 항목 | 제외 사유 | 후순위 |
|---|---|---|
| 네이티브 앱(iOS/Android) | 초기 트래픽/운영 리스크 | V2 |
| 실시간 채팅(1:1) | CS/모더레이션 부담 | V2 |
| 고도 ML 추천/매칭 | 데이터 축적 필요 | V2 |
| 복잡한 인사/근태/급여 시스템 연동 | 범위 과대 | V2+ |
| 다국어/해외 | 타깃 아님 | 미정 |
| 대규모 광고 네트워크 연동 | 초기 불필요 | V1+ |

**수용 기준(AC)**  
- MVP 범위에 포함된 기능만으로 “회원가입→공고 등록/탐색→지원/지원자 관리→채용 처리” E2E가 끊김 없이 동작해야 한다.  
- Non-goals에 정의된 기능은 백로그에만 존재하고, MVP 산출물/테스트 범위에서 제외되어야 한다.

---

## 2.3 사용자/이해관계자 정의 (Personas)

### 페르소나 요약
| 페르소나 | 예시 직군/유형 | 핵심 목적 | 주요 행동 |
|---|---|---|---|
| 개인회원(구직자) | 간호사/간호조무사/치위생/물리치료/방사선/원무/코디 | 조건 맞는 공고 지원, 제안 수신 | 이력서 작성, 공고 검색/필터, 스크랩, 지원, 제안 응답 |
| 기업회원(채용담당자) | 병원/의원/요양/치과/검진센터/의료기업 | 빠른 채용, 지원자 관리 | 기업 인증, 공고 등록/수정, 지원자 검토/연락, 인재 검색/열람 |
| 내부 운영자(Admin/CS/세일즈) | 운영/고객지원/영업 | 신뢰도/매출/CS 처리 | 공고/기업 검수, 신고 처리, 환불/정산 지원, 정책 운영 |

---

### 1) 개인회원(구직자)
- **목적**
  - 지역/교대/급여/직군/진료과 기반으로 적합 공고 탐색 및 지원
  - 면허/경력 기반으로 스카우트 제안 수신 및 관리
- **주요 행동**
  - 회원가입 → 휴대폰/이메일 인증 → 이력서 작성(학력/경력/면허/희망조건) → 공고 탐색/스크랩 → 지원 → 지원 현황 조회
- **페인포인트**
  - 공고 정보가 부정확/과장/연락처 노출 과다
  - 교대/킵/부서/진료과 등 핵심 조건이 구조화되어 있지 않음
  - 지원 후 진행 상태를 알기 어려움
- **필수 데이터(예시)**
  - 면허 종류/면허번호(옵션 또는 증빙 기반), 자격증, 경력(기관/기간/직무), 희망 근무형태/교대/급여, 희망 지역

**AC(구직자 페르소나 반영)**  
- 이력서에 “면허/자격/희망조건/교대”가 구조화 필드로 존재해야 한다.  
- 구직자는 마이페이지에서 “지원 현황(상태/업데이트 시각)”을 확인할 수 있어야 한다.

---

### 2) 기업회원(병원/의료기관 채용담당자)
- **목적**
  - 검증된 구직자 지원 확보
  - 지원자 파이프라인(검토/면접/합격/불합격) 관리
  - 인재 검색 후 열람/스카우트로 채용 리드 타임 단축
- **주요 행동**
  - 기업 회원가입 → 사업자등록증 업로드 → 인증 승인 → 공고 등록/결제(옵션) → 지원자 평가/연락 → 채용 처리
- **페인포인트**
  - 허위 지원/중복 지원, 연락처 수집 목적 지원
  - 공고 작성이 번거롭고 필수 항목 누락이 잦음
  - 지원자 연락처 노출 정책이 불명확하여 개인정보 리스크 존재
- **필수 데이터**
  - 사업자등록번호, 의료기관 유형, 주소, 담당자 연락처(검증), 인증 상태, 공고 노출/결제 내역

**AC(기업 페르소나 반영)**  
- 기업 인증이 “대기/승인/반려 + 반려 사유”로 관리되어야 한다.  
- 인증 전 기업은 공고를 “작성/임시저장”은 가능하되 “노출(공개)”은 불가해야 한다(MVP 정책).

---

### 3) 내부 운영자(Admin/CS/세일즈)
- **목적**
  - 플랫폼 신뢰도 유지(불량 공고/스팸 차단)
  - 결제/환불/정산 및 문의 처리
  - 세일즈를 위한 기업 리드/상품 이용 현황 파악
- **주요 행동**
  - 공고 검수/블라인드, 신고 처리, 기업 인증 심사
  - 고객 문의 응대(템플릿/상태), 환불 처리(요청/승인), 로그 확인
- **페인포인트**
  - 수작업 검수량 급증, 근거(로그) 부족
  - 정책/권한이 불명확하여 임의 처리 발생
- **필수 데이터**
  - 검수 상태/히스토리, 신고 내역/증빙, 결제/환불 내역, 관리자 액션 로그

**AC(운영자 페르소나 반영)**  
- Admin 콘솔에서 “기업 인증/공고 검수/신고 처리/차단”을 역할별로 수행 가능해야 한다.  
- 모든 운영자 주요 액션은 감사로그(admin_logs)에 기록되어야 한다.

---

## 2.4 핵심 유저 플로우 (User Journey)

> 표기 규칙: 단계 번호는 시퀀스, 예외는 (E#)로 표기

### 1) 구직자: 회원가입/로그인 → 프로필/이력서 → 공고 탐색 → 스크랩 → 지원 → 지원 현황
1. 회원가입(개인)  
   - 입력: 이메일(또는 휴대폰), 비밀번호, 이름(실명 정책은 오픈 이슈), 휴대폰 인증(옵션)  
   - (E1) 이메일 중복, 휴대폰 인증 실패, 비밀번호 정책 불일치  
2. 프로필/이력서 작성  
   - 필수: 대표 이력서 제목, 직군, 경력(신입/경력), 희망 지역  
   - 선택: 면허/자격/상세 경력/희망 교대/급여  
   - (E2) 면허번호 형식 오류(검증 규칙은 오픈 이슈), 파일 업로드 실패  
3. 공고 탐색/검색/필터  
   - (E3) 검색 결과 0건 → 필터 완화 제안/추천 공고 제공  
4. 스크랩  
   - (E4) 비회원 스크랩 시 로그인 유도(딥링크로 복귀)  
5. 지원  
   - 공고별 요구 사항에 따라: 이력서 선택/첨부, 추가 질문(옵션)  
   - (E5) 이력서 비공개 상태, 지원 마감, 중복 지원, 파일 미첨부  
6. 지원 현황 확인  
   - 상태: 접수/검토/면접/합격/불합격/보류  
   - (E6) 기업이 지원 상태 미갱신 → “마지막 업데이트” 표기 및 알림

**AC**  
- 구직자는 로그인 후 3클릭 이내에 “지원 현황” 화면에 접근 가능해야 한다.  
- 지원 제출 시 application_status_history가 1건 이상 생성되어야 한다(접수).

---

### 2) 병원: 회원가입/기업인증 → 공고 등록 → 지원자 확인/평가 → 면접 제안/연락 → 채용 완료
1. 기업 회원가입  
   - 입력: 사업자등록번호, 기업명, 담당자명/연락처/이메일  
   - (E1) 사업자번호 중복, 담당자 인증 실패  
2. 기업인증 신청  
   - 사업자등록증 업로드 + 추가 증빙(옵션)  
   - 상태: 대기 → 승인/반려  
   - (E2) 서류 판독 불가/불일치 → 반려 사유 기록  
3. 공고 등록(템플릿 기반)  
   - 필수 항목 누락 방지(진료과/직군/근무형태/근무지/급여 범위 등)  
   - (E3) 인증 전 공개 불가, 금지 문구(정책) 포함 시 자동 보류  
4. 지원자 확인/평가  
   - 리스트/상세, 태그/메모, 상태 변경  
   - (E4) 열람권 부족 시 연락처/이력서 상세 제한  
5. 면접 제안/연락 기록  
   - 연락처 노출 정책에 따라 노출/마스킹  
   - (E5) 구직자 수신거부/차단 시 연락 제한  
6. 채용 완료 처리  
   - 공고 상태 자동 마감(옵션)  
   - (E6) 중복 채용 처리, 통계 반영

**AC**  
- 인증 승인된 기업만 공고 “공개” 가능해야 한다.  
- 기업은 지원자 상태를 변경할 때마다 히스토리가 남아야 한다.

---

### 3) 병원: 인재 검색/열람권 사용 → 스카우트 제안 → 응답 관리
1. 인재 검색(필터: 직군/경력/면허/지역/교대)  
   - (E1) 검색 0건 → 필터 완화/추천 조건 제시  
2. 인재 열람  
   - 유료: 크레딧 차감 또는 구독 권한 확인  
   - (E2) 크레딧 부족 → 결제 화면 유도  
3. 스카우트 제안 발송  
   - 제안 메시지 템플릿 + 공고 연결(옵션)  
   - (E3) 동일 대상 중복 제안 제한(쿨다운)  
4. 개인 응답(수락/거절/보류)  
   - (E4) 응답 지연, 수신 거부/차단  
5. 응답 관리  
   - 기업 대시보드에서 상태별 관리, 후속 연락 기록

**AC**  
- 인재 열람 시 “권한 체크→차감(또는 사용 기록)→열람 제공”이 원자적으로 처리되어야 한다(중복 차감 방지).  
- 스카우트 응답은 3상태(수락/거절/보류)로 기록되어야 한다.

---

### 4) 알림(이메일/SMS/푸시) 구독/수신/해지 및 수신 거부
1. 회원 알림 설정(중요/마케팅 분리)  
2. 이벤트 발생(지원 접수/상태변경/스카우트/결제 등)  
3. 채널별 발송(이메일 기본, SMS 옵션)  
4. 수신 거부 처리(마케팅 필수, 중요 알림은 최소화 정책 필요)  
   - (E1) 발송 실패, 스팸 처리, 잘못된 번호/이메일

**AC**  
- 마케팅 알림은 수신동의(opt-in) 없으면 발송 불가해야 한다.  
- 알림 발송 실패는 재시도/Dead-letter(옵션)로 기록되어야 한다.

---

### 5) 유료 상품 구매/결제/세금계산서/환불 정책 흐름
1. 상품 선택(부스팅/상단노출/열람권/배너)  
2. 결제 생성(주문 생성 → PG 결제창)  
3. 결제 성공/실패 콜백(웹훅) 처리  
4. 권한/혜택 부여(노출권/크레딧/기간)  
5. 세금계산서 요청(요건 정의 필요)  
6. 환불 요청/처리(정책 초안 기반)  
   - (E1) 웹훅 누락/중복, 부분 사용 후 환불, 결제 취소 실패

**AC**  
- 웹훅 기반으로 결제 상태가 최종 확정되어야 한다(프론트 리다이렉트만 신뢰 금지).  
- 결제 성공 시 entitlement(혜택) 부여 로그가 남아야 한다.

---

## 2.5 정보 구조(IA) & 화면/페이지 목록

### 상위 메뉴/탭 구조(제안)
- 공통: 홈 / 채용공고 / 인재검색(기업) / 고객센터 / 마이페이지(개인) 또는 기업 대시보드(기업)
- 개인: 이력서 / 지원현황 / 스크랩 / 알림설정
- 기업: 공고관리 / 지원자관리 / 인재검색 / 스카우트 / 결제/상품 / 기업설정
- 운영자: Admin 콘솔(별도 도메인 또는 /admin)

---

### 페이지 목록 및 요구사항 요약

| 구분 | 페이지 | URL 예시 | 접근 권한 | 필수 컴포넌트 | 핵심 데이터 |
|---|---|---|---|---|---|
| 공통 | 홈 | / | 전체 | 검색바, 추천 공고, 카테고리(직군/지역), 공지 | job_posts(추천), banners |
| 공통 | 공고 리스트 | /jobs | 전체 | 필터 패널, 정렬, 리스트, 페이지네이션 | search index 또는 jobs query |
| 공통 | 공고 상세 | /jobs/[id] | 전체 | 상세 정보, 지원 버튼, 스크랩, 신고 | job_post, company_public, apply eligibility |
| 개인 | 회원가입/로그인 | /auth/* | 전체 | 이메일/폰 인증, 비번 정책, 소셜(옵션) | users, auth |
| 개인 | 이력서 작성 | /me/resume | 개인 | 이력서 폼, 저장/미리보기, 공개 설정 | resumes, licenses, educations, careers |
| 개인 | 지원 현황 | /me/applications | 개인 | 상태 탭, 타임라인, 취소(옵션) | applications, status_history |
| 개인 | 스크랩/관심기업 | /me/favorites | 개인 | 스크랩 리스트, 팔로우 기업 | favorites, follows |
| 개인 | 알림 설정 | /me/notifications | 개인 | 채널별/유형별 on/off, 수신거부 | notification_preferences |
| 기업 | 기업 가입/인증 | /biz/verify | 기업(미인증) | 서류 업로드, 상태/반려 사유 | company_verifications |
| 기업 | 기업 대시보드 | /biz | 기업 | KPI 요약, 공고/지원자 현황, 결제 상태 | jobs, applications, payments |
| 기업 | 공고 관리 | /biz/jobs | 기업 | 공고 리스트, 등록/수정/마감/연장 | job_posts |
| 기업 | 공고 등록/수정 | /biz/jobs/new | 기업 | 템플릿, 미리보기, 검수 상태 | job_post_draft, moderation |
| 기업 | 지원자 관리(ATS) | /biz/applicants | 기업 | 파이프라인(칸반/리스트), 메모/태그 | applications, notes, tags |
| 기업 | 인재 검색 | /biz/talents | 기업(인증) | 필터, 결과 리스트, 열람 버튼 | resume_public_index |
| 기업 | 스카우트 | /biz/scouts | 기업 | 발송/응답 현황, 템플릿 | scouts, messages |
| 기업 | 결제/상품 | /biz/billing | 기업 | 상품 목록, 결제, 내역, 환불 요청 | products, payments, invoices |
| 공통 | 고객센터 | /help | 전체 | FAQ, 공지, 1:1 문의, 신고 | faqs, notices, inquiries, reports |
| 운영 | 관리자 콘솔 | /admin | Admin/CS/세일즈 | 검수 큐, 신고 처리, 회원/공고 관리, 결제/환불 조회 | admin_* |

**AC**  
- 각 페이지는 “접근 권한”이 서버/클라이언트 양쪽에서 enforce되어야 한다(백엔드 권한 체크 필수).  
- 공고 상세 페이지는 SEO 인덱싱 가능(SSR/ISR)해야 한다(MVP 최소 요건).

---

## 2.6 기능 요구사항 (MVP / V1 / V2)

### 릴리즈 범위 요약표
| 기능군 | MVP | V1 | V2 |
|---|---:|---:|---:|
| A 회원/인증 | ✅ | ✅ | ✅ |
| B 공고 도메인 | ✅ | ✅ | ✅ |
| C 검색/필터 | ✅(핵심) | ✅(고도화) | ✅ |
| D 지원/ATS-lite | ✅ | ✅(고도화) | ✅ |
| E 이력서/인재 | ✅(기본) | ✅(고도화) | ✅ |
| F 스카우트/매칭 | ✅(룰 기반/단순) | ✅(개선) | ✅(ML) |
| G 스크랩/관심/최근본 | ✅ | ✅ | ✅ |
| H 알림 | ✅(이메일) | ✅(SMS/템플릿) | ✅(푸시/PWA) |
| I 기업 인증 | ✅ | ✅(자동검증 옵션) | ✅ |
| J 유료화/정산 | ✅(최소 1종) | ✅(확장) | ✅(리포트 고도화) |
| K 고객센터/운영 | ✅(기본) | ✅ | ✅ |
| L 부가기능 | ❌ | 옵션 | ✅ |

---

### 공통 정책/규칙(전 기능군 적용)
- 모든 쓰기 API는 인증 필요(비회원 쓰기 금지), 예외: 회원가입/로그인/비밀번호 재설정
- 상태 변경(지원/공고/인증/결제)은 히스토리 테이블 기록
- 개인정보(연락처/이메일/면허번호 등)는 최소 노출/마스킹 정책 적용(2.8 참고)
- 운영자 액션은 admin_logs에 기록

**AC**  
- 상태 기반 엔티티(job_posts, applications, verifications, payments)는 모두 “현재 상태 + 변경 이력”을 갖는다.  
- 민감 데이터가 포함된 응답은 역할에 따라 마스킹되어야 한다.

---

## (A) 회원/인증

### 기능 설명
- 개인/기업 회원 유형 분리 및 권한/데이터 모델 분리
- 이메일/휴대폰 인증, 비밀번호 정책, 토큰 기반 인증(JWT 등)
- 탈퇴/휴면/차단 정책

### 주요 화면/유저 스토리
- 개인: 이메일로 가입하고 이력서를 작성한다.
- 기업: 기업 계정으로 가입한 뒤 인증을 신청한다.
- 운영자: 스팸 계정을 차단하고 로그를 확인한다.

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 회원 유형 | users.type = `PERSON` / `COMPANY` 분리 |
| 인증 수단 | 이메일 로그인 필수, 휴대폰 인증(가입/중요 행위) 옵션 |
| 비밀번호 | 최소 8자 이상, 영문/숫자/특수 중 2종 이상(정책은 오픈 이슈에서 확정) |
| 세션/토큰 | Access Token + Refresh Token(권장), 토큰 폐기(logout) |
| 계정 상태 | ACTIVE / SUSPENDED / DELETED / DORMANT(옵션) |
| 탈퇴 | 즉시 로그인 불가, 개인정보 파기/익명화 정책은 법무 검토 필요 |
| 소셜 로그인 | 옵션(카카오/네이버/구글) — V1 권장 |

### 수용 기준(AC)
- 개인/기업 회원가입 시 `users.type`이 올바르게 저장되고, 권한 매트릭스(2.7)에 따라 접근이 제한되어야 한다.
- 비밀번호 정책 불일치 시 400 + 명확한 에러코드 반환.
- Refresh Token 재발급은 1) 유효성 검증 2) 로테이션(옵션) 3) 폐기 리스트(옵션)로 보안 고려가 반영되어야 한다.

### 예외/에지 케이스
- 동일 이메일로 개인/기업 중복 가입 허용 여부(오픈 이슈)
- 휴면 전환 기준(예: 1년 미접속) 및 알림 발송 의무(법무 검토 필요)
- 차단된 계정이 결제/지원 등 기존 데이터에 미치는 영향(데이터 보존/비식별)

### 로그/이벤트(추적) 포인트
- `signup_start`, `signup_complete`, `login_success`, `login_fail`, `logout`, `account_suspend`, `account_delete_request`

---

## (B) 공고(채용 포지션) 도메인

### 기능 설명
- 공고 등록/수정/마감/연장
- 의료 특화 필드: 모집직군, 부서, 진료과, 근무형태, 교대(3교대/킵 등), 급여, 근무지
- 공고 템플릿으로 필수 항목 누락 방지
- 공고 검수/신고/블라인드

### 주요 화면/유저 스토리
- 기업이 템플릿을 따라 공고를 등록하고 공개한다.
- 구직자가 공고 상세에서 조건을 확인하고 지원한다.
- 운영자가 신고된 공고를 블라인드 처리한다.

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 공고 상태 | DRAFT / PUBLISHED / CLOSED / BLINDED / EXPIRED |
| 공고 필수 필드 | 직군, 고용형태, 근무지(주소/지역코드), 급여표기, 모집마감일(또는 상시), 담당자 공개 여부 |
| 교대 필드 | `shift_type`: DAY / 2SHIFT / 3SHIFT / KEEP / OTHER(확장 가능) |
| 급여 | `salary_type`: ANNUAL/MONTHLY/HOURLY/NEGOTIABLE + min/max(옵션) |
| 템플릿 | 필수 항목 미입력 시 저장은 “임시저장”만 허용, 공개 불가 |
| 수정 정책 | 공개 중 수정 시 이력 남김, 주요 필드 변경 시 재검수(옵션) |
| 검수 | MVP: 인증 기업 + 룰 기반 금칙어/연락처 정책 검사 + 신고 기반 사후 대응 |
| 신고 | 신고 사유/설명/증빙(옵션) 저장, 운영자 큐 노출 |
| 블라인드 | BLINDED 시 사용자에게 “블라인드 처리” 표시(사유 노출 수준은 정책) |

### 수용 기준(AC)
- 공고 PUBLISHED는 `company_verifications.status=APPROVED`인 기업만 가능.
- 공고 상세 응답은 상태에 따라 노출이 달라야 한다:
  - PUBLISHED: 전체 노출
  - CLOSED/EXPIRED: 상세 접근 가능(지원 CTA 비활성)
  - BLINDED: 비회원/개인은 접근 제한 또는 사유 안내 페이지
- 공고 생성/수정/마감/연장 시 audit log 또는 job_post_history가 기록되어야 한다.

### 예외/에지 케이스
- 상시채용: 마감일 null 허용 여부(정책 필요)
- 동일 기업의 중복 공고/스팸성 대량 등록(레이트리밋/검수)
- 연락처/이메일을 본문에 직접 기재하는 공고(자동 마스킹/검수 필요)

### 로그/이벤트
- `job_create`, `job_publish`, `job_edit`, `job_close`, `job_extend`, `job_report_submit`, `job_blind`

---

## (C) 탐색/검색/필터/정렬

### 기능 설명
- 키워드 검색, 지역/기관유형/직무/부서/진료과/고용형태/교대/급여 등 필터
- 정렬: 최신/마감임박/추천/급여 등

### 주요 화면/유저 스토리
- 구직자가 “서울 + 간호사 + 3교대”로 필터링해 공고를 찾는다.
- 기업이 “물리치료사 + 경력 3년+” 인재를 찾는다(인재검색은 E에서 상세).

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 키워드 | 제목/본문/병원명 기준 검색(Full-text) |
| 지역 | 시/도, 시/군/구 코드(최소 시/도) |
| 필터 | 직군, 기관유형, 고용형태, 교대, 진료과/부서(선택) |
| 정렬 | 최신, 마감임박, 급여높은순(급여 협의 제외 처리 규칙 필요) |
| 자동완성 | 옵션(MVP는 제외 가능) |
| 검색 성능 | 리스트 p95 < 1.5s 목표(환경에 따라 조정) |

### 수용 기준(AC)
- 공고 리스트 API는 동일 조건에서 안정적인 페이지네이션을 제공해야 한다(정렬키 + 커서 또는 offset 정책 명확화).
- 필터 조합이 3개 이상 동시에 적용 가능해야 한다.
- 급여 정렬 시 `NEGOTIABLE` 처리 규칙이 명시되어야 한다(예: 최하단 고정).

### 예외/에지 케이스
- 필터 값이 잘못된 경우(미지원 지역코드 등) 400 처리
- 검색 결과 0건 UX(필터 완화/추천) — FE 요구사항 포함
- 금칙어/차단 기업 공고는 검색 결과에서 제외

### 로그/이벤트
- `search_submit`(query, filters, sort, result_count), `filter_apply`, `job_list_view`

---

## (D) 지원(Apply) & 지원자 관리(ATS-lite)

### 기능 설명
- 온라인 지원(이력서 선택/첨부)
- 지원 상태 관리 및 히스토리
- 기업 측 파이프라인/메모/태그/다운로드
- 구직자 지원 현황

### 주요 화면/유저 스토리
- 구직자가 공고에 이력서로 지원한다.
- 기업이 지원자를 검토하고 면접 상태로 변경한다.
- 구직자가 결과 알림을 받고 현황을 확인한다.

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 지원 생성 | job_id + applicant_user_id 유니크(중복 지원 정책 필요) |
| 지원 상태 | RECEIVED / REVIEWING / INTERVIEW / OFFERED / HIRED / REJECTED / ON_HOLD |
| 히스토리 | 상태 변경 시 application_status_history 기록(변경자 포함) |
| 메모/태그 | 기업 내부용 notes/tags(구직자에게 노출 X) |
| 연락처 노출 | 기본: 구직자 연락처는 “지원 생성 후 기업에게 노출”(단, 인증/결제 조건 오픈 이슈) |
| 다운로드 | 이력서 PDF 다운로드(옵션: V1) / MVP는 화면 조회 + 파일첨부 다운로드 |
| 지원 취소 | 정책: 접수 후 일정 시간 내 취소 가능 여부(오픈 이슈) |

### 수용 기준(AC)
- 지원 제출 시:
  1) applications 생성
  2) status_history에 `RECEIVED` 기록
  3) 기업에 알림 발송 큐 적재(이메일)
  가 트랜잭션 또는 보상 트랜잭션으로 일관성 있게 처리되어야 한다.
- 기업은 지원자 상태를 변경할 수 있으나, 최종 상태(HIRED/REJECTED)는 되돌림 정책이 정의되어야 한다(오픈 이슈).
- 구직자는 본인 지원건만 조회 가능해야 한다(권한 강제).

### 예외/에지 케이스
- 공고 마감 이후 지원 시도 → 409(또는 400) + “마감” 메시지
- 차단 기업/차단 구직자 상호작용 제한
- 파일 첨부 용량 초과/확장자 제한

### 로그/이벤트
- `apply_start`, `apply_submit`, `apply_fail`, `application_status_change`, `applicant_note_create`

---

## (E) 이력서/프로필 & 인재정보

### 기능 설명
- 이력서 작성(학력/경력/면허/자격/희망조건)
- 공개/비공개, 열람권한(기업 열람권 모델)
- 기업 인재 검색 + 열람 과금(크레딧/구독 중 택1)

### 주요 화면/유저 스토리
- 구직자가 대표 이력서를 작성하고 “공개”로 설정한다.
- 기업이 조건에 맞는 인재를 검색하고 열람권을 사용해 연락한다.

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 이력서 구조 | resumes + 하위(학력/경력/면허/자격/희망조건) 정규화 |
| 공개 설정 | PUBLIC / PRIVATE / ONLY_APPLIED(옵션) |
| 민감정보 | 연락처/이메일/면허번호는 기본 마스킹, 권한 충족 시 노출 |
| 인재 검색 | MVP: 제한적 필터(직군/경력/지역/교대/면허) |
| 열람 과금 | 크레딧(권장) 또는 구독(옵션) — 선택 필요 |
| 열람 기록 | 기업별 열람 로그(talent_views) 저장(최근 본 인재) |

### 수용 기준(AC)
- PRIVATE 이력서는 기업 검색 결과에 노출되지 않아야 한다(지원 시에만 공유되는 정책은 옵션).
- 기업 열람권(크레딧) 사용 시:
  - 동일 이력서 재열람(예: 7일 내)은 무료/유료 여부 정책이 문서화되어야 한다(오픈 이슈).
- 이력서 공개 상태 변경은 즉시 반영되어야 한다(캐시 무효화 포함).

### 예외/에지 케이스
- 면허번호 진위 확인: MVP는 수집 여부 자체를 오픈 이슈로 두고, 수집 시 암호화/접근통제 필수
- 경력 기간 겹침/형식 오류 검증
- 기업이 열람 후 연락처 수집 목적 남용 → 약관/신고/차단 정책 필요(법무 검토 필요)

### 로그/이벤트
- `resume_create`, `resume_update`, `resume_visibility_change`, `talent_search`, `talent_view_consume_credit`

---

## (F) 스카우트/포지션 제안(매칭)

### 기능 설명
- 기업 → 개인에게 제안 발송, 개인 응답(수락/거절/보류)
- 초기 룰 기반 추천(예: 직군/지역/경력 매칭)

### 주요 화면/유저 스토리
- 기업이 특정 인재에게 공고 기반 스카우트를 보낸다.
- 구직자가 제안을 확인하고 응답한다.

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 제안 생성 | scout: company_id, user_id, (optional) job_post_id, message |
| 상태 | SENT / VIEWED / ACCEPTED / REJECTED / HOLD |
| 중복 제한 | 동일 기업→동일 개인: N일 쿨다운(정책 필요) |
| 추천(룰) | “직군 일치 + 지역 근접 + 교대 선호” 등 점수화(서버 계산) |
| 알림 | 제안 발송/응답 시 이메일 알림 |

### 수용 기준(AC)
- 구직자는 본인에게 온 스카우트만 조회/응답 가능해야 한다.
- 기업은 “열람권/인증” 조건을 만족해야 스카우트를 발송할 수 있어야 한다(정책 확정 필요).
- 스카우트 응답은 상태 히스토리로 기록되어야 한다.

### 예외/에지 케이스
- 구직자 수신거부(마케팅/제안 구분 정책 필요)
- 기업 계정 정지 시 기존 스카우트 메시지 접근 정책
- 악성 스카우트(차별 문구 등) 신고/블라인드

### 로그/이벤트
- `scout_send`, `scout_view`, `scout_respond`, `scout_block`

---

## (G) 스크랩/관심기업/최근 본 공고

### 기능 설명
- 공고 스크랩, 기업 팔로우(관심기업)
- 관심기업 새 공고 알림
- 최근 본 공고/인재 열람내역(권한 분리)

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 스크랩 | favorites(user_id, job_id) 유니크 |
| 관심기업 | follows(user_id, company_id) 유니크 |
| 최근 본 공고 | job_views(user_id, job_id, ts) (옵션: 세션 기반도 가능) |
| 최근 본 인재(기업) | talent_views(company_id, resume_id, ts) |
| 알림 | 관심기업 신규 공고(마케팅/정보성 분류 정책 필요) |

### 수용 기준(AC)
- 스크랩/팔로우는 중복 생성되지 않아야 하며, 토글 동작이 일관적이어야 한다.
- 최근 본 목록은 본인만 조회 가능해야 한다(기업의 인재 열람내역은 기업만).

### 예외/에지 케이스
- 블라인드/삭제 공고가 스크랩에 있을 때 처리(“삭제됨” 표시)
- 비회원 스크랩: 로그인 후 복원 여부(옵션)

### 로그/이벤트
- `job_scrap`, `job_unscrap`, `company_follow`, `company_unfollow`, `recent_job_view`

---

## (H) 알림/메시징

### 기능 설명
- 이메일/SMS/푸시(옵션) 채널별 템플릿
- 수신동의/수신거부
- 중요 알림 vs 마케팅 알림 분리

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 알림 유형 | SYSTEM(필수): 지원 접수/상태변경/스카우트/결제 / MARKETING(선택) |
| 채널 | EMAIL 기본, SMS 옵션(V1 권장), PUSH V2 |
| 템플릿 | 알림 유형별 템플릿 관리(운영자 수정은 V1) |
| 발송 큐 | notifications_outbox 테이블 또는 큐 기반(재시도) |
| 수신거부 | 마케팅 opt-out 저장 및 즉시 반영 |

### 수용 기준(AC)
- 마케팅 알림은 opt-in이 없는 사용자에게 발송되면 안 된다.
- 발송 요청→발송 결과(성공/실패)가 저장되어야 하며, 실패는 재시도 정책이 있어야 한다(최소 1회).

### 예외/에지 케이스
- 이메일 반송/스팸 처리 → 해당 주소 품질 플래그
- SMS 비용 폭증 방지(레이트리밋, 중요 알림만 SMS)

### 로그/이벤트
- `notification_sent`, `notification_failed`, `marketing_opt_in`, `marketing_opt_out`

---

## (I) 기업 인증/검증

### 기능 설명
- 사업자등록증 업로드, 담당자 정보 확인
- 인증 상태(대기/승인/반려) & 반려 사유

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| 인증 신청 | company_verifications 생성, 파일 업로드(원본/리사이즈) |
| 상태 | PENDING / APPROVED / REJECTED |
| 반려 사유 | 코드 + 상세 메모(운영자 입력) |
| 재신청 | REJECTED 후 재신청 허용 |
| 승인 권한 | Admin/CS(권한 분리) |

### 수용 기준(AC)
- APPROVED 전에는 공고 공개/인재 열람 등 핵심 기능이 제한되어야 한다(정책 표로 명시).
- 인증 파일은 접근 제어가 되어야 한다(서명 URL, 만료, 권한 체크).

### 예외/에지 케이스
- 동일 사업자번호 다중 계정(지점/프랜차이즈) 처리 정책
- 서류 위조/부정 사용 → 계정 영구 정지 및 로그 보존(법무 검토 필요)

### 로그/이벤트
- `company_verify_submit`, `company_verify_approve`, `company_verify_reject`

---

## (J) 유료화/광고/정산

### 기능 설명
- 상품: 공고 상단노출, 긴급채용 배지, 추천공고, 인재 열람권(크레딧), 배너 광고
- 결제수단/내역/세금계산서/환불 정책
- 광고 성과 리포트(노출/클릭/지원)

### MVP 상품 구성(제안: 최소 1~2개로 시작)
| 상품 유형 | MVP 포함(선택) | 과금 모델 | 혜택/권한(예시) |
|---|---:|---|---|
| 공고 부스팅/상단노출 | ✅ | 기간제(7일/14일) | 리스트 상단/배지 노출 |
| 인재 열람권 | ✅(권장) | 크레딧(10/30/100) | 인재 연락처/상세 열람 시 차감 |
| 배너 광고 | ❌ | CPM/기간제 | 홈/리스트 배너 |
| 추천공고 | ❌ | CPC/기간제 | 추천 영역 노출(룰 기반) |

> 최종 MVP에서는 “상단노출 1종 + 크레딧 1종” 조합을 권장(운영/정산 단순화).

### 결제/정산 요구사항
| 항목 | MVP 요구 |
|---|---|
| PG 연동 | 1개 PG 선택(토스페이먼츠/PortOne 등) |
| 주문 모델 | orders + payments 분리(주문 생성 후 결제 시도) |
| 웹훅 | 결제 성공/실패/취소 웹훅 처리(중복/순서 무관 idempotent) |
| 영수증 | 결제 상세에서 영수증/거래번호 확인 |
| 세금계산서 | “요청 접수 → 발행/반려 상태” 관리(발행 자체는 법무/회계/외부 연동 검토 필요) |
| 환불 | 환불 요청/승인/반려 프로세스 + 정책 문구 제공(법무 검토 필요) |
| 성과 리포트 | MVP: 노출/클릭/지원수(집계 지표) |

### 환불/취소 정책(초안, 단정 금지)
- 기간제 노출 상품: 시작 전 취소 가능, 진행 중 부분 환불 여부는 정책 확정 필요(**법무/회계 검토 필요**)  
- 크레딧: 미사용분 환불 가능 여부/수수료 공제 여부 정책 필요(**법무 검토 필요**)  
- 결제 오류/중복 결제: 증빙 기반 전액 환불 원칙(정책 문구 필요)

### 수용 기준(AC)
- 결제 성공은 반드시 웹훅으로 서버에서 확정되고, 그 후에만 혜택(entitlement)이 부여되어야 한다.
- 동일 웹훅이 여러 번 와도 결제/혜택이 중복 처리되지 않아야 한다(idempotency key).
- 결제/환불/세금계산서 요청은 모두 상태값과 히스토리를 가져야 한다.

### 예외/에지 케이스
- 웹훅 지연/누락 → 주기적 결제상태 reconcile(옵션)
- 부분 환불/부분 사용(크레딧) 정책 확정 필요
- 세금계산서 발행 주체/시점/필수 정보(사업자등록번호 등) 누락

### 로그/이벤트
- `product_view`, `checkout_start`, `payment_success`, `payment_fail`, `refund_request`, `refund_complete`

---

## (K) 고객센터/운영

### 기능 설명
- FAQ, 1:1 문의, 공고/회원 신고, 공지사항
- 운영자(Admin) 콘솔 요구사항

### 요구사항
| 항목 | MVP 요구 |
|---|---|
| FAQ | 카테고리/검색(옵션), 운영자 CRUD |
| 1:1 문의 | 회원/비회원(이메일 기반) 접수, 상태(접수/처리중/완료) |
| 신고 | 공고/기업/사용자 대상 신고, 처리 상태/결과 |
| 공지사항 | 운영자 게시, 노출 범위(전체/기업/개인) |
| Admin 콘솔 | 기업 인증, 공고 검수, 신고 처리, 회원 차단, 결제 조회 |

### 수용 기준(AC)
- 1:1 문의는 운영자 답변 이력 및 처리 상태가 기록되어야 한다.
- 신고 처리(블라인드/경고/무처리)는 근거 메모와 처리자, 처리 시각이 남아야 한다.
- Admin 콘솔 접근은 IP 제한/2FA(옵션) 등 보안 요구사항이 NFR에 반영되어야 한다.

### 예외/에지 케이스
- 악성/중복 문의 스팸 → 레이트리밋/캡차
- 신고 악용(경쟁사 공격) → 증빙/누적 점수 기반 제재 정책(오픈 이슈)

### 로그/이벤트
- `inquiry_submit`, `inquiry_resolve`, `report_submit`, `report_resolve`, `admin_action`

---

## (L) (옵션) 부가 기능 후보
- 급여 계산기
- 취업활동증명서(발급 요건/법무 검토 필요)
- 교육/강의
- 병원 개원/임대분양 정보

**AC**  
- MVP에는 UI/데이터 모델/운영 정책이 포함되지 않는다(백로그로만 관리).  
- V2 채택 시 본 문서의 기능군 템플릿(설명/스토리/AC/에지/이벤트)을 동일하게 적용한다.

---

## 2.7 권한/역할 매트릭스

### 역할 정의
- 비회원(GUEST)
- 개인회원(PERSON)
- 기업회원 미인증(COMPANY_UNVERIFIED)
- 기업회원 인증(COMPANY_VERIFIED)
- 어드민(ADMIN)
- CS(CS)
- 세일즈(SALES)

### 권한 매트릭스(요약)
| 기능 | GUEST | PERSON | COMPANY_UNVERIFIED | COMPANY_VERIFIED | ADMIN | CS | SALES |
|---|---:|---:|---:|---:|---:|---:|---:|
| 공고 리스트/상세 조회 | R | R | R | R | R | R | R |
| 공고 지원 | - | W | - | - | - | - | - |
| 이력서 작성/수정 | - | W | - | - | - | - | - |
| 지원 현황 조회 | - | R(본인) | - | - | R | R | R(제한) |
| 기업 가입/인증 신청 | - | - | W | - | R | W(처리) | R |
| 공고 작성(임시저장) | - | - | W | W | R | R | R |
| 공고 공개(PUBLISHED) | - | - | - | W | W | W | R |
| 지원자 조회 | - | - | 제한(정책) | R/W | R | R | R(제한) |
| 지원자 상태 변경 | - | - | - | W | W | W | - |
| 인재 검색/열람 | - | - | - | R/W(결제 필요) | R | R | R |
| 스카우트 발송 | - | - | - | W(정책) | R | R | R |
| 결제/상품 구매 | - | - | - | W | R | R | R |
| 공고/회원 블라인드/차단 | - | - | - | - | W | W(범위) | - |
| 관리자 설정/정책 변경 | - | - | - | - | W | - | - |

> R: Read, W: Write/Action, -: 불가  
> “제한(정책)” 항목은 2.14에서 최종 결정 필요.

**수용 기준(AC)**  
- 모든 API는 역할 기반 권한 체크를 서버에서 수행해야 한다(클라이언트 숨김만으로는 불충분).  
- ADMIN/CS/SALES의 권한 범위를 엔드포인트 단위로 문서화하고, 감사로그가 남아야 한다.

---

## 2.8 데이터 모델 (DB 스키마 초안)

### 데이터 분리/보안(개념 수준)
- PII(연락처/이메일/주소/면허번호 등)는 별도 컬럼 암호화(필드 레벨) 또는 별도 테이블 분리 고려
- 마스킹 정책:
  - 구직자 연락처: 기업 권한 충족 전 `010-****-1234` 형태
  - 이메일: `ab***@domain.com`
- 파일(사업자등록증 등)은 오브젝트 스토리지에 저장하고 DB에는 메타/경로만 저장 + 서명 URL 방식
- 접근 감사:
  - 인재 열람(talent_views), 연락처 노출(contact_reveals) 로그 기록(옵션)

**AC**  
- PII 포함 컬럼은 최소화되어야 하며, 권한 없는 응답에서 마스킹되어야 한다.  
- 인재 열람/결제/운영 액션은 추적 가능한 로그 테이블이 존재해야 한다.

---

### 핵심 테이블 목록(요약)
| 테이블 | 목적 | 주요 컬럼(요약) | 인덱스 후보 |
|---|---|---|---|
| users | 계정 | id, type, email, phone, password_hash, status, created_at | (email), (phone), (type,status) |
| user_profiles | 개인 프로필 | user_id(PK/FK), name, birth_year(옵션), region_code | (region_code) |
| resumes | 이력서 마스터 | id, user_id, title, visibility, desired_job, desired_region, desired_shift | (user_id), (visibility, desired_job) |
| resume_licenses | 면허 | id, resume_id, license_type, license_no(enc), issued_at | (resume_id), (license_type) |
| resume_careers | 경력 | id, resume_id, org_name, role, start_at, end_at | (resume_id), (start_at) |
| companies | 기업 | id, business_no, name, type, address, status | (business_no), (status) |
| company_users | 기업 계정 매핑 | id, company_id, user_id, role | (company_id), (user_id) |
| company_verifications | 기업 인증 | id, company_id, status, reject_reason, file_key, reviewed_by | (company_id), (status) |
| job_posts | 공고 | id, company_id, status, title, body, job_category, dept, specialty, employment_type, shift_type, salary_*, location_code, published_at, close_at | (status,published_at), (location_code), (job_category) |
| job_post_history | 공고 변경 이력 | id, job_post_id, changed_by, diff_json, created_at | (job_post_id, created_at) |
| applications | 지원 | id, job_post_id, applicant_user_id, resume_id, status, created_at | unique(job_post_id, applicant_user_id), (status) |
| application_status_history | 지원 상태 이력 | id, application_id, from, to, changed_by, created_at | (application_id, created_at) |
| application_notes | 기업 메모 | id, application_id, company_id, note, created_at | (application_id) |
| scouts | 스카우트 | id, company_id, user_id, job_post_id?, status, message, created_at | (company_id, status), (user_id, status) |
| favorites | 스크랩 | id, user_id, job_post_id, created_at | unique(user_id, job_post_id) |
| follows | 관심기업 | id, user_id, company_id, created_at | unique(user_id, company_id) |
| notifications | 알림 기록 | id, user_id, type, channel, payload_json, status, sent_at | (user_id, created_at), (status) |
| products | 상품 | id, type, name, price, currency, config_json, active | (type, active) |
| orders | 주문 | id, company_id, product_id, amount, status, created_at | (company_id, created_at) |
| payments | 결제 | id, order_id, pg, pg_tid, status, paid_at | (pg_tid), (status) |
| entitlements | 권한/혜택 | id, company_id, type, balance, start_at, end_at | (company_id, type) |
| invoices | 세금계산서 요청/발행 | id, company_id, order_id, status, requested_at | (company_id, status) |
| reports | 신고 | id, target_type, target_id, reporter_user_id?, reason_code, detail, status | (status, created_at) |
| admin_logs | 운영 로그 | id, admin_user_id, action, target, meta_json, created_at | (admin_user_id, created_at) |

---

### PK/FK 관계(핵심)
- users(1) — (1) user_profiles  
- users(1) — (N) resumes  
- companies(1) — (N) job_posts  
- job_posts(1) — (N) applications — (N) application_status_history  
- companies(1) — (N) company_verifications  
- companies(1) — (N) company_users — (1) users  
- companies(1) — (N) entitlements  
- orders(1) — (1..N) payments

**AC**  
- applications는 `(job_post_id, applicant_user_id)` 유니크를 기본으로 하여 중복 지원을 기술적으로 방지해야 한다(정책상 허용 시 예외 처리 필요).  
- 결제/혜택 부여는 orders/payments/entitlements 간 참조로 추적 가능해야 한다.

---

## 2.9 API 명세(초안)

### API 공통 규칙
- Base URL: `/api/v1`
- 인증: `Authorization: Bearer <access_token>`
- 에러 응답 표준
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "필수 값이 누락되었습니다.",
    "details": {"field": "email"}
  }
}
```

### 권한 에러 규칙
- 401: 토큰 없음/만료/위조
- 403: 권한 부족(역할/소유권 위반)
- 404: 리소스 숨김 정책(블라인드/권한 없는 리소스는 404로 응답 가능)

### 에러 코드(예시)
| code | HTTP | 의미 |
|---|---:|---|
| VALIDATION_ERROR | 400 | 입력값 오류 |
| AUTH_FAILED | 401 | 인증 실패 |
| FORBIDDEN | 403 | 권한 없음 |
| NOT_FOUND | 404 | 리소스 없음/숨김 |
| CONFLICT | 409 | 중복/상태 충돌(마감 후 지원 등) |
| RATE_LIMITED | 429 | 과다 요청 |
| INTERNAL_ERROR | 500 | 서버 오류 |

---

### 엔드포인트 목록(요약)

| 도메인 | Method | Path | 권한 | 설명 |
|---|---|---|---|---|
| Auth | POST | /auth/signup | GUEST | 회원가입(개인/기업) |
| Auth | POST | /auth/login | GUEST | 로그인 |
| Auth | POST | /auth/refresh | AUTH | 토큰 재발급 |
| Auth | POST | /auth/logout | AUTH | 로그아웃(토큰 폐기) |
| Jobs | GET | /jobs | ALL | 공고 리스트/검색 |
| Jobs | GET | /jobs/{id} | ALL | 공고 상세 |
| Jobs | POST | /biz/jobs | COMPANY_VERIFIED | 공고 생성(임시/공개 분리 가능) |
| Jobs | PATCH | /biz/jobs/{id} | COMPANY_VERIFIED(소유) | 공고 수정 |
| Jobs | POST | /biz/jobs/{id}/publish | COMPANY_VERIFIED(소유) | 공고 공개 |
| Jobs | POST | /biz/jobs/{id}/close | COMPANY_VERIFIED(소유) | 공고 마감 |
| Search | GET | /search/suggest | ALL | 자동완성(옵션) |
| Resume | GET | /me/resumes | PERSON | 내 이력서 목록 |
| Resume | POST | /me/resumes | PERSON | 이력서 생성 |
| Resume | PATCH | /me/resumes/{id} | PERSON(소유) | 이력서 수정 |
| Resume | POST | /me/resumes/{id}/visibility | PERSON(소유) | 공개 설정 변경 |
| Apply | POST | /jobs/{id}/apply | PERSON | 지원 |
| Apply | GET | /me/applications | PERSON | 내 지원 목록 |
| Apply | GET | /me/applications/{id} | PERSON(소유) | 내 지원 상세 |
| Company | POST | /biz/verify | COMPANY_UNVERIFIED | 인증 신청 |
| Company | GET | /biz/dashboard | COMPANY | 대시보드 |
| ATS | GET | /biz/applicants | COMPANY_VERIFIED | 지원자 목록 |
| ATS | PATCH | /biz/applicants/{id}/status | COMPANY_VERIFIED | 지원 상태 변경 |
| Scout | GET | /biz/scouts | COMPANY_VERIFIED | 스카우트 목록 |
| Scout | POST | /biz/scouts | COMPANY_VERIFIED | 스카우트 발송 |
| Scout | GET | /me/scouts | PERSON | 수신 스카우트 |
| Scout | POST | /me/scouts/{id}/respond | PERSON | 스카우트 응답 |
| Payments | GET | /billing/products | COMPANY | 상품 목록 |
| Payments | POST | /billing/orders | COMPANY_VERIFIED | 주문 생성 |
| Payments | POST | /billing/webhooks/{pg} | PG | 결제 웹훅 수신 |
| Payments | GET | /billing/payments | COMPANY | 결제 내역 |
| Payments | POST | /billing/invoices/request | COMPANY | 세금계산서 요청 |
| Admin | GET | /admin/moderation/jobs | ADMIN/CS | 공고 검수 큐 |
| Admin | POST | /admin/jobs/{id}/blind | ADMIN/CS | 공고 블라인드 |
| Admin | GET | /admin/verifications | ADMIN/CS | 기업 인증 큐 |
| Admin | POST | /admin/verifications/{id}/decision | ADMIN/CS | 승인/반려 |
| Admin | POST | /admin/users/{id}/suspend | ADMIN/CS | 계정 정지 |
| Admin | GET | /admin/reports | ADMIN/CS | 신고 큐 |

---

### 요청/응답 JSON 예시(핵심)

#### 1) 회원가입
**POST /api/v1/auth/signup**
```json
{
  "type": "PERSON",
  "email": "user@example.com",
  "password": "P@ssw0rd!",
  "phone": "01012341234",
  "agree_terms": true,
  "agree_marketing": false
}
```
**200**
```json
{
  "user": {"id": "u_123", "type": "PERSON"},
  "tokens": {"access_token": "...", "refresh_token": "..."}
}
```

#### 2) 공고 리스트
**GET /api/v1/jobs?keyword=간호사&location_code=11&shift_type=3SHIFT&sort=LATEST&page=1**
```json
{
  "items": [
    {
      "id": "j_100",
      "title": "병동 간호사 모집",
      "company_name": "OO병원",
      "location_code": "11",
      "employment_type": "FULL_TIME",
      "shift_type": "3SHIFT",
      "salary_type": "MONTHLY",
      "salary_min": 3200000,
      "salary_max": 3800000,
      "published_at": "2026-02-10T09:00:00+09:00"
    }
  ],
  "page": 1,
  "total": 120
}
```

#### 3) 지원
**POST /api/v1/jobs/{id}/apply**
```json
{
  "resume_id": "r_55",
  "attachments": [{"file_key": "s3://.../cert.pdf", "name": "자격증.pdf"}],
  "answers": [{"question_id": "q1", "value": "가능"}]
}
```
**200**
```json
{
  "application": {
    "id": "a_900",
    "status": "RECEIVED",
    "created_at": "2026-02-14T10:30:00+09:00"
  }
}
```

#### 4) 결제 웹훅(예시)
**POST /api/v1/billing/webhooks/toss**
```json
{
  "event_type": "PAYMENT_CONFIRMED",
  "order_id": "o_10",
  "pg_tid": "T123",
  "amount": 99000,
  "status": "PAID"
}
```
**200**
```json
{"ok": true}
```

**수용 기준(AC)**  
- 모든 쓰기 API는 인증/권한/소유권 체크를 수행하고 실패 시 표준 에러 코드로 응답해야 한다.  
- 결제 웹훅 엔드포인트는 서명 검증(또는 시크릿 검증)을 필수로 하며, 중복 수신에도 멱등해야 한다.  
- 공고 상세/리스트 API는 마스킹 정책을 준수해야 한다(기업/개인/비회원별 응답 차이).

---

## 2.10 비기능 요구사항(NFR)

### 보안(OWASP 관점)
- 인증/인가: JWT 만료/재발급/폐기, RBAC, 소유권 체크
- 입력 검증: SQLi/XSS/CSRF(세션 사용 시), 파일 업로드 검사
- 레이트리밋: 로그인/회원가입/지원/스카우트/문의/신고
- 관리자 보안: /admin 별도 접근 제어, IP allowlist(옵션), 2FA(옵션)
- 취약점 점검: 배포 전 SAST/DAST(옵션)

**AC**  
- 주요 쓰기 API는 레이트리밋이 적용되어야 한다(최소 로그인/회원가입).  
- 관리자 콘솔은 일반 사용자 세션과 분리된 권한 체계를 가져야 한다.

### 개인정보보호(최소수집/보관/파기)
- 최소 수집: MVP에서 반드시 필요한 필드만 수집
- 보관 기간/파기: 회원 탈퇴/휴면/법정 보관 등은 **법무 검토 필요**
- 접근 통제: 인재 열람/연락처 노출은 로그로 남김(권장)
- 광고성 정보 전송: 수신동의/거부 준수(**준수 필요/법무 검토 필요**)

**AC**  
- 마케팅 수신 동의 상태는 DB에 저장되고, 발송 파이프라인에서 강제되어야 한다.  
- PII가 포함된 응답은 마스킹 정책을 통과해야 한다(테스트 케이스 포함).

### 성능/가용성
- 목표: 공고 리스트 p95 < 1.5s, 공고 상세 p95 < 800ms(초안)
- 캐싱: 인기 공고/필터 메타는 CDN/서버 캐시, 검색 결과는 조건 기반 캐시(주의)
- CDN: 이미지/정적 리소스 필수
- 백업/DR: DB 스냅샷 + WAL 보관(옵션), 장애 시 RPO/RTO 목표는 오픈 이슈

**AC**  
- 공고 상세 페이지는 CDN 캐시 또는 ISR로 TTFB를 개선해야 한다(MVP 최소).  
- DB 주요 인덱스가 적용되어야 한다(2.8 인덱스 후보 반영).

### SEO(구직 공고 상세 인덱싱)
- 공고 상세는 SSR/ISR로 메타태그(title/description/og) 제공
- robots/sitemap 생성(공고 기준), BLINDED/비공개 제외

**AC**  
- sitemap.xml이 최신 PUBLISHED 공고를 반영해야 한다(배치/온디맨드 정책).

### 접근성/모바일 최적화
- 모바일 우선 UI, 폼 입력 편의(키보드 타입/검증 메시지)
- 기본 접근성: 라벨/대체텍스트/포커스

**AC**  
- 핵심 플로우(검색→상세→지원→현황)가 모바일에서 기능상 동일해야 한다.

### 스팸/어뷰징 방지
- 기업 인증 필수화(공개/열람/스카우트)
- 공고 등록 레이트리밋, 금칙어 필터, 신고 누적 점수 기반 제재
- 크롤링/스크래핑 방지: 비정상 트래픽 차단, robots, 행동 기반 방어(옵션)
- 연락처 수집 방지: 연락처 노출 최소화, 열람 로그, 신고

**AC**  
- 인증되지 않은 기업은 공고 공개가 불가해야 한다.  
- 인재 열람/연락처 노출 이벤트는 모두 감사 가능한 로그가 남아야 한다(최소 talent_views).

---

## 2.11 분석/이벤트 트래킹 설계

### 이벤트 네이밍 규칙
- snake_case: `<object>_<action>`  
- 공통 속성: `user_id`, `company_id`, `session_id`, `timestamp(KST 저장은 ISO+TZ 권장)`, `source`(utm/referrer), `device_type`
- 도메인 속성: `job_id`, `resume_id`, `application_id`, `product_id`, `order_id`

**AC**  
- KPI에 필요한 이벤트(2.1)가 모두 정의되어야 하며, 누락 없이 수집되어야 한다.  
- 이벤트는 PII(연락처/이메일 원문)를 payload에 포함하지 않아야 한다.

### 핵심 이벤트(20개 내외)
| # | 이벤트명 | 트리거 | 주요 속성 |
|---:|---|---|---|
| 1 | signup_start | 가입 시작 | type |
| 2 | signup_complete | 가입 완료 | type |
| 3 | login_success | 로그인 성공 | type |
| 4 | job_list_view | 공고 리스트 노출 | filters, sort |
| 5 | search_submit | 검색 실행 | keyword, filters |
| 6 | job_view | 공고 상세 조회 | job_id |
| 7 | job_scrap | 스크랩 | job_id |
| 8 | apply_start | 지원 시작 | job_id |
| 9 | apply_submit | 지원 완료 | job_id, resume_id |
|10 | application_status_change | 기업 상태 변경 | application_id, to_status |
|11 | resume_create | 이력서 생성 | resume_id |
|12 | resume_update | 이력서 수정 | resume_id |
|13 | talent_search | 인재 검색 | filters |
|14 | talent_view_consume_credit | 인재 열람(차감) | resume_id, credit_before/after |
|15 | scout_send | 스카우트 발송 | user_id, job_id? |
|16 | scout_respond | 스카우트 응답 | scout_id, response |
|17 | product_view | 상품 상세/목록 조회 | product_id |
|18 | checkout_start | 결제 시작 | order_id, amount |
|19 | payment_success | 결제 성공 | payment_id, amount |
|20 | report_submit | 신고 제출 | target_type, target_id |

### 퍼널 정의(조회→스크랩→지원)
- Funnel A(구직자): `job_view` → `job_scrap` → `apply_submit`
- Funnel B(기업 결제): `product_view` → `checkout_start` → `payment_success`
- Funnel C(스카우트): `talent_view_consume_credit` → `scout_send` → `scout_respond(ACCEPTED)`

**AC**  
- 퍼널 단계는 동일 세션 또는 동일 사용자 기준으로 연결 가능해야 한다(세션/유저 식별 전략 확정).  
- 이벤트는 최소 “서버 수집(권장)” 또는 “클라+서버 혼합”으로 중복/누락 방지 정책이 있어야 한다.

---

## 2.12 마일스톤/일정/백로그

### MVP 8주 일정(가정, KST)
| 주차 | 마일스톤 | 산출물 |
|---:|---|---|
| 1~2주 | 기반 구축 | IA 확정, DB/API 골격, Auth, 기본 UI 프레임 |
| 3~4주 | 공고/검색/상세 | 공고 CRUD(기업), 리스트/상세, 기본 필터, SEO(상세) |
| 5~6주 | 지원/ATS-lite | 지원 제출/현황, 기업 지원자 파이프라인, 알림(이메일) |
| 7주 | 기업 인증/운영 | 인증 신청/처리, 신고/블라인드, Admin 콘솔 1차 |
| 8주 | 결제/상품(최소) + 안정화 | PG 연동, 상품/내역, 로그/모니터링, E2E 테스트 |

**AC**  
- 6주 차 종료 시점에 “공고 등록→지원→지원자 상태 변경→알림” E2E가 스테이징에서 통과해야 한다.  
- 8주 차 종료 시점에 결제 성공/웹훅/혜택 부여가 멱등 처리로 검증되어야 한다.

---

### 에픽 → 스토리 → 태스크 백로그(요약)
| 에픽 | 스토리 | 태스크(예시) | 우선순위 | 릴리즈 |
|---|---|---|---:|---|
| Auth | 개인/기업 가입/로그인 | JWT/Refresh, 비번 정책, 이메일 검증 | P0 | MVP |
| 공고 | 공고 등록/공개 | 템플릿 검증, 상태 머신, 히스토리 | P0 | MVP |
| 검색 | 리스트/필터 | DB 인덱스, 필터 쿼리, 정렬 | P0 | MVP |
| 지원 | 지원 제출 | 중복 지원 방지, 첨부 업로드, 상태 히스토리 | P0 | MVP |
| ATS | 지원자 관리 | 칸반/리스트 API, 메모/태그 | P0 | MVP |
| 이력서 | 작성/공개 | 스키마/검증, 공개 설정, 마스킹 | P0 | MVP |
| 인증 | 기업 인증 | 업로드, 승인/반려, 권한 게이트 | P0 | MVP |
| 운영 | 신고/블라인드 | 신고 접수, 처리 워크플로우, admin_logs | P0 | MVP |
| 결제 | 상품/PG | 주문/결제/웹훅/혜택 | P0 | MVP |
| 알림 | 이메일 발송 | 템플릿, outbox, 실패 재시도 | P1 | MVP |
| 스카우트 | 제안/응답 | 상태, 중복 제한, 알림 | P1 | MVP~V1 |
| 검색 고도화 | 자동완성/오픈서치 | suggest API, 색인 파이프라인 | P2 | V1 |

---

### 리스크 & 대응
| 리스크 | 설명 | 대응 |
|---|---|---|
| 법/규정 | 고용정보/개인정보/광고성 정보 전송/전자상거래 등 | 초기부터 “준수 필요/법무 검토 필요” 체크리스트 운영, 정책 확정 전 과도 기능 금지 |
| PG/세금계산서 | 웹훅/정산/전자세금계산서 요건 복잡 | MVP는 최소 상품/내역 중심, 세금계산서는 “요청 관리+외부 연동”으로 분리 |
| 스팸 공고/어뷰징 | 대량 등록/허위 공고/연락처 수집 | 기업 인증, 등록 레이트리밋, 신고/블라인드 SLA, 로그 기반 제재 |
| 검색 품질 | 필터 조합/성능 문제 | MVP는 단순 쿼리+인덱스, V1에 검색엔진 도입 고려 |
| 개인정보 노출 | 인재 열람/연락처 노출 리스크 | 마스킹 기본, 열람권/로그/권한 강화, 운영 정책 수립 |

**AC**  
- 각 리스크는 백로그에 “대응 태스크”가 최소 1개 이상 연결되어야 한다.  
- MVP 릴리즈 전 보안/권한 테스트(2.13)가 통과해야 한다.

---

## 2.13 테스트 플랜

### 테스트 레벨
| 레벨 | 범위 | 기준 |
|---|---|---|
| 단위(Unit) | 서비스/도메인 로직 | 상태 머신, 권한 체크, 결제 멱등 |
| 통합(Integration) | DB/외부 연동 | PG 웹훅, 파일 업로드, 이메일 발송(outbox) |
| E2E | 핵심 플로우 | 구직자/기업/운영자 시나리오 |
| 보안/권한 | 접근 제어 | RBAC/소유권/PII 마스킹 |

### 핵심 시나리오 테스트 케이스(예시)
| 시나리오 | 단계 | 기대 결과 |
|---|---|---|
| 구직자 지원 | 로그인→이력서→공고 상세→지원 | applications 생성 + 상태 RECEIVED + 알림 큐 |
| 기업 공고 공개 | 기업 인증 승인→공고 작성→공개 | PUBLISHED 전환 + 검색 노출 |
| ATS 상태 변경 | 지원자 조회→상태 INTERVIEW 변경 | 히스토리 생성 + 구직자 알림 발송 |
| 인재 열람 과금 | 크레딧 보유→열람→재열람 | 차감 규칙대로 처리 + 로그 기록 |
| 신고/블라인드 | 공고 신고→운영자 블라인드 | 검색/상세 접근 정책대로 차단 |

### 보안/권한 테스트 체크리스트
- [ ] 비회원이 쓰기 API 호출 시 401  
- [ ] 개인이 타인의 이력서/지원 조회 시 403/404  
- [ ] 기업이 타 기업 공고 수정 시 403  
- [ ] 미인증 기업의 공고 공개 시 403  
- [ ] PII 마스킹(비권한 응답에서 연락처/이메일 원문 노출 금지)  
- [ ] 관리자 API 접근 통제(일반 토큰으로 접근 불가)  
- [ ] 결제 웹훅 서명 검증 실패 시 401/403  
- [ ] 레이트리밋 동작(로그인/회원가입/지원)

**AC**  
- MVP 릴리즈 전 E2E 시나리오 최소 5개가 CI에서 자동화되어야 한다(권장).  
- PII 마스킹/권한 테스트는 “회귀 테스트”로 고정되어야 한다.

---

## 2.14 오픈 이슈/결정 필요 사항

| 주제 | 결정 필요 내용 | 영향 범위 |
|---|---|---|
| 회원 정책 | 이메일 기준 개인/기업 중복 가입 허용 여부 | Auth/데이터 모델/CS |
| 휴대폰 인증 | 가입 필수 vs 선택, 어떤 행위에 강제할지 | 스팸/전환율 |
| 면허번호 수집 | 수집 여부/검증 수준(증빙 업로드 vs 번호만) | 개인정보/법무 |
| 연락처 노출 정책 | 지원만으로 노출 vs 열람권 필요 vs 인증만 | 수익화/개인정보 |
| 중복 지원 | 동일 공고 재지원 허용 조건 | UX/DB 제약 |
| 공고 검수 수준 | 사전검수(승인 후 공개) vs 사후검수(신고 기반) | 운영비용/속도 |
| 수신거부 | 중요 알림과 마케팅 알림의 구분/정의 | 법/정책 |
| 결제 PG | 토스페이먼츠 vs PortOne 등 선택 | 개발/운영 |
| 세금계산서 | 발행 주체/시점/필수정보/외부 연동 | 회계/법무 |
| 환불 정책 | 기간제/크레딧 부분 환불 규칙 | 고객 이슈/법무 |
| 검색 엔진 | MVP DB검색 유지 vs V1 OpenSearch 도입 | 성능/품질 |
| 안심번호 | 도입 여부(연락처 보호) | 비용/개인정보 |

**AC**  
- MVP 착수 전(또는 2주 내) “연락처 노출 정책/PG/검수 수준” 3가지는 반드시 결정되어야 한다(미결정 시 일정 리스크).  
- 법/규정 관련 항목은 “법무 검토 필요”로 트래킹되고 결정 로그가 남아야 한다.

---

## Appendix: 용어집

| 용어 | 정의 |
|---|---|
| 공고 | 병원/의료기관이 게시하는 채용 게시물 |
| 포지션 | 공고 내 채용 단위(직군/부서/진료과/근무형태 조합) |
| ATS-lite | 지원자 관리 최소 기능(상태/메모/태그/연락 기록) |
| 스카우트 | 기업이 구직자에게 보내는 포지션 제안 |
| 열람권 | 기업이 인재(이력서/연락처)를 열람하기 위한 유료 권한(크레딧/구독) |
| 교대 | 근무 교대 형태(2교대/3교대 등) |
| 킵(KEEP) | 특정 시간/요일을 “대기/유지” 형태로 운영하는 근무 형태를 의미(정확 정의는 운영 정책 확정 필요) |
| 안심번호 | 실제 연락처 대신 가상번호로 연결하는 보호 수단(도입 시 외부 서비스 연동 가능) |
| 블라인드 | 운영자가 정책 위반/신고 등 사유로 콘텐츠를 비공개 처리하는 상태 |
| 검수 | 공고/기업/콘텐츠의 적합성 확인 프로세스(사전/사후 방식 선택) |
| 마스킹 | 개인정보를 일부 가려 노출하는 처리(권한 충족 시 해제) |
| 웹훅 | PG 등 외부 서비스가 서버로 결제 상태를 통지하는 콜백 |
